<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SOL's RNG Game Pull</title>
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: 'Arial', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px;
      position: relative;
    }

    .button {
      background: #ff0077;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 18px;
      border-radius: 8px;
      cursor: pointer;
      margin-bottom: 10px;
      transition: transform 0.2s;
    }

    .button:hover {
      transform: scale(1.05);
    }

    .library,
    .result {
      margin-top: 20px;
      max-width: 600px;
      width: 100%;
    }

    .game-entry {
      background: #222;
      padding: 10px 15px;
      border-radius: 6px;
      margin: 8px 0;
      opacity: 0;
      animation: fadeIn 0.6s ease forwards;
      cursor: pointer;
    }

    .common {
      color: #aaa;
    }

    .rare {
      color: #00faff;
    }

    .epic {
      color: #cc00ff;
    }

    .legendary {
      color: #ffc700;
      font-weight: bold;
    }

    .result-animation {
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      margin-top: 20px;
      animation: popFade 0.6s ease;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    @keyframes fadeOut {
      to {
        opacity: 0;
      }
    }

    @keyframes popFade {
      0% {
        transform: scale(0.8);
        opacity: 0;
      }
      50% {
        transform: scale(1.1);
        opacity: 1;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes popupAppear {
      0% {
        opacity: 0;
        transform: translate(-50%, -60%) scale(0.95);
      }
      100% {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    .blur-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      backdrop-filter: blur(10px);
      background: rgba(0, 0, 0, 0.4);
      z-index: 1000;
      display: none;
    }

    .game-popup {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      height: 80%;
      background: #000;
      border: 3px solid #fff;
      z-index: 1001;
      display: none;
      flex-direction: column;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
      animation: popupAppear 0.4s ease forwards;
    }

    .game-popup iframe {
      width: 100%;
      height: 100%;
      border: none;
      flex: 1;
    }

    .close-btn {
      background: #ff0077;
      border: none;
      color: white;
      font-size: 16px;
      padding: 8px 12px;
      cursor: pointer;
      align-self: flex-end;
    }

    .slot-machine {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      justify-content: center;
    }

    .reel {
      width: 120px;
      height: 60px;
      background: #222;
      border: 3px solid #fff;
      border-radius: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      font-weight: bold;
      animation: slotSpin 0.2s infinite;
      color: #fff;
    }

    .reel.stop {
      animation: none;
    }

    @keyframes slotSpin {
      0% {
        transform: rotateX(0deg);
      }
      100% {
        transform: rotateX(360deg);
      }
    }

    #roastLog {
      max-width: 600px;
      margin-top: 12px;
      min-height: 24px;
      text-align: center;
      color: #888;
      font-style: italic;
      opacity: 1;
      transition: opacity 0.6s ease;
      height: 24px;
    }
  </style>
</head>
<body>
  <h1>ðŸŽ² SOL's RNG Game Generator ðŸŽ®</h1>
  <button class="button" onclick="rollGame()">Pull a Game</button>

  <div
    id="timer-container"
    style="
      width: 100px;
      height: 12px;
      background: #222;
      border-radius: 6px;
      overflow: hidden;
      margin: 0 auto 0 auto;
    "
  >
    <div
      id="timer-bar"
      style="width: 100%; height: 100%; background: #ff0077; transition: width 1s linear"
    ></div>
  </div>

  <div id="roastLog"></div>

  <div class="slot-machine">
    <div class="reel" id="reel1">ðŸŽ®</div>
    <div class="reel" id="reel2">ðŸŽ®</div>
    <div class="reel" id="reel3">ðŸŽ®</div>
  </div>

  <div class="result"></div>

  <div class="library">
    <h2>Your Library ðŸ“š</h2>
    <div id="library-list"></div>
  </div>

  <div class="blur-bg" id="blurBg"></div>
  <div class="game-popup" id="gamePopup">
    <button class="close-btn" onclick="closePopup()">âœ– Close</button>
    <iframe id="popupFrame"></iframe>
  </div>

  <script>
    const games = [
      { name: "Slope", rarity: "common", link: "slope.html" },
      { name: "Flappy Bird", rarity: "common", link: "flappy.html" },
      { name: "Moto X3M", rarity: "rare", link: "moto/index.html" },
      { name: "1v1.lol", rarity: "rare", link: "1v1.html" },
      { name: "Subway Surfers", rarity: "epic", link: "subway/game.html" },
      { name: "Basket Bros", rarity: "epic", link: "basket.html" },
      { name: "GTA Web", rarity: "legendary", link: "gta/index.html" },
      { name: "Bloons TD", rarity: "legendary", link: "bloons/index.html" }
    ];

    const rarities = { common: 60, rare: 25, epic: 10, legendary: 5 };

    const roastLines = [
      "that pull was trash. even your mouse cringed.",
      "bro i couldâ€™ve pulled better blindfolded.",
      "common?? just uninstall.",
      "the game ainâ€™t even fw u fr.",
      "that pull was so bad it gave me malware.",
      "legendary?? more like legendarily mid.",
      "another day, another L.",
      "SOL himself cryin rn.",
      "the gacha gods said nope.",
      "you really pulled that on school wifi? tragic."
    ];

    const library = [];

    const pullBtn = document.querySelector(".button");
    const timerBar = document.getElementById("timer-bar");
    const resultDiv = document.querySelector(".result");
    const roastLog = document.getElementById("roastLog");

    let cooldown = 30;
    let timerInterval;

    function startTimer() {
      let timeLeft = cooldown;
      pullBtn.disabled = true;
      updateTimerBar(timeLeft);

      timerInterval = setInterval(() => {
        timeLeft--;
        updateTimerBar(timeLeft);
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          pullBtn.disabled = false;
          timerBar.style.width = "100%";
        }
      }, 1000);
    }

    function updateTimerBar(time) {
      const percentage = (time / cooldown) * 100;
      timerBar.style.width = percentage + "%";
    }

    let isRoastShowing = false;

    function showRoast(roast) {
      if (isRoastShowing) {
        // fade out old then show new
        roastLog.style.opacity = "0";
        setTimeout(() => {
          roastLog.textContent = `ðŸ—‘ï¸ ${roast}`;
          roastLog.style.opacity = "1";
        }, 600);
      } else {
        roastLog.textContent = `ðŸ—‘ï¸ ${roast}`;
        roastLog.style.opacity = "1";
        isRoastShowing = true;
      }
    }

    function rollGame() {
      if (pullBtn.disabled) return;
      pullBtn.disabled = true;
      startTimer();

      const reel1 = document.getElementById("reel1");
      const reel2 = document.getElementById("reel2");
      const reel3 = document.getElementById("reel3");

      const shuffled = [...games].sort(() => 0.5 - Math.random());

      reel1.classList.remove("stop");
      reel2.classList.remove("stop");
      reel3.classList.remove("stop");

      let i = 0;
      const spinInterval = setInterval(() => {
        reel1.textContent = shuffled[i % shuffled.length].name;
        reel2.textContent = shuffled[(i + 1) % shuffled.length].name;
        reel3.textContent = shuffled[(i + 2) % shuffled.length].name;
        i++;
      }, 100);

      setTimeout(() => {
        clearInterval(spinInterval);

        const roll = Math.random() * 100;
        let pickedRarity = "common";
        if (roll <= rarities.legendary) pickedRarity = "legendary";
        else if (roll <= rarities.legendary + rarities.epic) pickedRarity = "epic";
        else if (roll <= rarities.legendary + rarities.epic + rarities.rare) pickedRarity = "rare";

        const filtered = games.filter((g) => g.rarity === pickedRarity);
        const selected = filtered[Math.floor(Math.random() * filtered.length)];

        reel1.textContent = selected.name;
        reel2.textContent = selected.name;
        reel3.textContent = selected.name;

        reel1.classList.add("stop");
        reel2.classList.add("stop");
        reel3.classList.add("stop");

        if (!library.find((g) => g.name === selected.name)) {
          library.push(selected);
          updateLibrary();
        }

        resultDiv.innerHTML = `
          <div class="result-animation ${selected.rarity}">
            ðŸŽ‰ You pulled a <span class="${selected.rarity}">${selected.rarity.toUpperCase()}</span>:
            <span class="game-entry ${selected.rarity}" onclick="openPopup('${selected.link}')">${selected.name}</span>
          </div>
        `;

        const roast = roastLines[Math.floor(Math.random() * roastLines.length)];
        showRoast(roast);
      }, 2000);
    }

    function updateLibrary() {
      const list = document.getElementById("library-list");
      list.innerHTML = "";
      library.forEach((g) => {
        list.innerHTML += `
          <div class="game-entry ${g.rarity}" onclick="openPopup('${g.link}')">
            ${g.name} <span class="${g.rarity}">[${g.rarity.toUpperCase()}]</span>
          </div>`;
      });
    }

    function openPopup(link) {
      const popup = document.getElementById("gamePopup");
      const frame = document.getElementById("popupFrame");
      const blur = document.getElementById("blurBg");
      frame.src = link;
      popup.style.display = "flex";
      blur.style.display = "block";
    }

    function closePopup() {
      const popup = document.getElementById("gamePopup");
      const frame = document.getElementById("popupFrame");
      const blur = document.getElementById("blurBg");
      frame.src = "";
      popup.style.display = "none";
      blur.style.display = "none";
    }
  </script>
</body>
</html>
